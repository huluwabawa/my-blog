# javaè®¾è®¡æ¨¡å¼





## è®¾è®¡æ¨¡å¼ç®€ä»‹ğŸ‘‹

è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚

è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«`åå¤`ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€`ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“`ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†åœ°è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾åœ°è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°å®ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†æ¥ä¸ä¹‹å¯¹åº”ï¼Œæ¯ç§æ¨¡å¼éƒ½æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼èƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŸå› ã€‚

### åˆ›å»ºå‹æ¨¡å¼

```text
è¿™äº›è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ new è¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚è¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»
```

> - [å·¥å‚æ¨¡å¼ï¼ˆFactory Pattern)](#_1-å·¥å‚æ¨¡å¼)
>
> -  æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰
> -  å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰
> -  å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰
> -  åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰

### ç»“æ„å‹æ¨¡å¼

```text
è¿™äº›æ¨¡å¼å…³æ³¨å¯¹è±¡ä¹‹é—´çš„ç»„åˆå’Œå…³ç³»ï¼Œæ—¨åœ¨è§£å†³å¦‚ä½•æ„å»ºçµæ´»ä¸”å¯å¤ç”¨çš„ç±»å’Œå¯¹è±¡ç»“æ„ã€‚
```

> - é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰
> - æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰
> - è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰
> - ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰
> - è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰
> - å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰
> - äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰
> - ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰

### è¡Œä¸ºå‹æ¨¡å¼

~~~text
è¿™äº›æ¨¡å¼å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’Œäº¤äº’ï¼Œæ—¨åœ¨è§£å†³å¯¹è±¡ä¹‹é—´çš„è´£ä»»åˆ†é…å’Œç®—æ³•çš„å°è£…ã€‚
~~~

>- è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰
>- å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰
>- è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰
>- è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰
>- ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰
>- å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰
>- è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰
>- çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰
>- ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰
>- ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰
>- æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰
>- è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰

### J2EEæ¨¡å¼

~~~text
è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨è¡¨ç¤ºå±‚ã€‚è¿™äº›æ¨¡å¼æ˜¯ç”± Sun Java Center é‰´å®šçš„ã€‚
~~~

> - MVC æ¨¡å¼ï¼ˆMVC Patternï¼‰
> - ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness Delegate Patternï¼‰
> - ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰
> - æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰
> - å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰
> - æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰
> - æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰
> - ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰

## è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³» :hand:

![è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»](http://8.137.17.19:9898/getImage?name=java-24-design-pattern.png)

### è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™

**1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰**

å¼€é—­åŸåˆ™çš„æ„æ€æ˜¯ï¼š**å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­**ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚

**2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰**

é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSP æ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“æ´¾ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œä¸”è½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œæ´¾ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ã€‚å®ç°å¼€é—­åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ï¼Œè€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚

**3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰**

è¿™ä¸ªåŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚

**4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰**

è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ„æ€æ˜¯ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ç”±æ­¤å¯è§ï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ã€ä¾¿äºå‡çº§å’Œç»´æŠ¤çš„è½¯ä»¶è®¾è®¡æ€æƒ³ï¼Œå®ƒå¼ºè°ƒé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚

**5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰**

æœ€å°‘çŸ¥é“åŸåˆ™æ˜¯æŒ‡ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚

**6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰**

åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚


## 1.å·¥å‚æ¨¡å¼ ğŸª
~~~ text
å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰æ˜¯ Java ä¸­æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚
~~~
### å·¥å‚æ¨¡å¼çš„ç±»å‹
> - ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰
> - å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰
> - æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰

| ä¼˜ç‚¹                                                   | ç¼ºç‚¹                                                         |
| ------------------------------------------------------ | ------------------------------------------------------------ |
| è°ƒç”¨è€…åªéœ€è¦çŸ¥é“å¯¹è±¡çš„åç§°å³å¯åˆ›å»ºå¯¹è±¡ã€‚               | æ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹åº”çš„å·¥å‚ï¼Œä½¿ç³»ç»Ÿä¸­ç±»çš„æ•°é‡æˆå€å¢åŠ ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œå…·ä½“ç±»çš„ä¾èµ–ã€‚ |
| æ‰©å±•æ€§é«˜ï¼Œå¦‚æœéœ€è¦å¢åŠ æ–°äº§å“ï¼Œåªéœ€æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å³å¯ã€‚ |                                                              |
| å±è”½äº†äº§å“çš„å…·ä½“å®ç°ï¼Œè°ƒç”¨è€…åªå…³å¿ƒäº§å“çš„æ¥å£ã€‚         |                                                              |

#### å®ç°(ç®€å•å·¥å‚æ¨¡å¼)

![å·¥å‚æ¨¡å¼](http://8.137.17.19:9898/getImage?name=factory.jpg)

* åˆ›å»ºä¸€ä¸ªæ¥å£å®šä¹‰æ–¹æ³•`Shape.java`

~~~ java
public interface Shape {
    void draw();
}

~~~

* åˆ›å»ºå®ç°æ¥å£çš„å®ä½“ç±»`Rectangle.java;Circle.java;Square.java`

::: code-group

``` java [Rectangle.java]
public class Rectangle implements Shape{
    @Override
    public void draw() {
        System.out.println("é•¿æ–¹å½¢::draw() method.");
    }
}
```

```java[Circle.java]
public class Circle implements Shape{
    @Override
    public void draw() {
        System.out.println("åœ†å½¢drawæ–¹æ³•");
    }
}
```

```java[Square.java]
public class Square implements Shape{
    @Override
    public void draw() {
        System.out.println("æ–¹å½¢drawæ–¹æ³•");
    }
}
```

:::

* åˆ›å»ºä¸€ä¸ªå·¥å‚`ShapeFactory.java`

  ~~~java
  public class ShapeFactory {
  
      // ä½¿ç”¨getShapeæ–¹æ³•è·å–å½¢çŠ¶ç±»å‹çš„å¯¹è±¡
      public Shape getShape(String shapeType){
          if(shapeType == null){
              return null;
          }
          if(shapeType.equalsIgnoreCase("CIRCLE")){
              return new Circle();
          } else if(shapeType.equalsIgnoreCase("RECTANGLE")){
              return new Rectangle();
          } else if(shapeType.equalsIgnoreCase("SQUARE")){
              return new Square();
          }
          return null;
      }
  }
  ~~~

* ä½¿ç”¨å·¥å‚

  ~~~ java
     ShapeFactory shapeFactory = new ShapeFactory();
  
          //è·å– Circle çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„ draw æ–¹æ³•
          Shape shape1 = shapeFactory.getShape("CIRCLE");
  
          //è°ƒç”¨ Circle çš„ draw æ–¹æ³•
          shape1.draw();
  
          //è·å– Rectangle çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„ draw æ–¹æ³•
          Shape shape2 = shapeFactory.getShape("RECTANGLE");
  
          //è°ƒç”¨ Rectangle çš„ draw æ–¹æ³•
          shape2.draw();
  
          //è·å– Square çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„ draw æ–¹æ³•
          Shape shape3 = shapeFactory.getShape("SQUARE");
  
          //è°ƒç”¨ Square çš„ draw æ–¹æ³•
          shape3.draw();
  // è¿è¡Œç»“æœ
  åœ†å½¢drawæ–¹æ³•
  é•¿æ–¹å½¢::draw() method.
  æ–¹å½¢drawæ–¹æ³•
  ~~~

* å·¥å‚æ–¹æ³•çš„æ‹“å±•`ObjectFactory`

  ~~~ java
  /**
   * æ‹“å±•é’ˆå¯¹å¤šä¸ªæ¥å£å®ç°ä¸€ä¸ªå…¬å…±çš„å·¥å‚ç±»
   */
  public class ObjectFactory {
      public <T>  T getObject(Class<T> clazz){
          if(clazz == null){
              return null;
          }
          T t=null;
          try {
              t= (T) Class.forName(clazz.getName()).newInstance();
          } catch (InstantiationException e) {
              throw new RuntimeException(e);
          } catch (IllegalAccessException e) {
              throw new RuntimeException(e);
          } catch (ClassNotFoundException e) {
              throw new RuntimeException(e);
          }
          return t;
      }
  }
  ~~~

  

